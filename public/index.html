<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>React Calc</title>
    <link rel="stylesheet" href="css/base.css" />
    <script src="libs/react.js"></script>
    <script src="libs/react-dom.js"></script>
    <script src="libs/browser.js"></script>
    <script src="libs/jquery.min.js"></script>
    <script src="libs/remarkable.min.js"></script>
  </head>
  <body>
    <div id="content"></div>
    <script type="text/babel">
    	var memory = [];

		var InputKey = React.createClass({
		  render: function() {
		    return (
		    	<div
		    		onClick={this.props.handler}
		    		className="inputKey btn">
		    		{this.props.val}
		    	</div>
		   	);
		  }
		});
		
		var EqualsKey = React.createClass({
		  render: function() {
		    return (<div className="equalsKey btn">=</div>);
		  }
		});
		
		var Screen = React.createClass({
			render: function(){
				return (
					<input
					  type="text"
		              placeholder="0.0"
		              onClick={this.props.handler}
		              className="screen"
		              value={this.props.data.join('')}
					/>
				);
			}
		});
		
		var Calc = React.createClass({
			getInitialState: function(){
				return{ memory: memory };
			},
			handleInputPressed: function(e){
				memory.push(e.target.innerText);
				this.setState({memory: memory});
			},
			handleEqualsPressed: function(e){
				//Evaluate memory string
				//Set as new memory value
				//Update state
			},
			render: function(){
				return(
					<table>
						<tbody>
							<tr>
								<td colSpan="4">
									<Screen data={this.state.memory} />
								</td>
							</tr>
							<tr>
								<td><InputKey val='7' handler={this.handleInputPressed} /></td>
								<td><InputKey val='8' handler={this.handleInputPressed} /></td>
								<td><InputKey val='9' handler={this.handleInputPressed} /></td>
								<td><InputKey val='/' handler={this.handleInputPressed} /></td>
							</tr>
							<tr>
								<td><InputKey val='4' handler={this.handleInputPressed} /></td>
								<td><InputKey val='5' handler={this.handleInputPressed} /></td>
								<td><InputKey val='6' handler={this.handleInputPressed} /></td>
								<td><InputKey val='*' handler={this.handleInputPressed} /></td>
							</tr>
							<tr>
								<td><InputKey val='1' handler={this.handleInputPressed} /></td>
								<td><InputKey val='2' handler={this.handleInputPressed} /></td>
								<td><InputKey val='3' handler={this.handleInputPressed} /></td>
								<td><InputKey val='-' handler={this.handleInputPressed} /></td>
							</tr>
							<tr>
								<td><InputKey val='0' handler={this.handleInputPressed} /></td>
								<td><InputKey val='.' handler={this.handleInputPressed} /></td>
								<td><InputKey val='%' handler={this.handleInputPressed} /></td>
								<td><InputKey val='+' handler={this.handleInputPressed} /></td>
							</tr>
							<tr>
								<td colSpan="4">
									<EqualsKey />
								</td>
							</tr>
						</tbody>
					</table>
				);
			}
		});
		
		ReactDOM.render(
		  <Calc />,
		  document.getElementById('content')
		);		
		
    </script>    
  </body>
</html>
